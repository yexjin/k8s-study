# 도커

### 도커 개념 이해

---

- 도커는 애플리케이션을 패키징, 배포, 실행하기 위한 플랫폼 → 애플리케이션을 전체 환경과 함께 패키지화할 수 있다. ( + 라이브러리 + 운영체제의 파일 시스템에 설치되는 모든 파일)
- 도커를 사용하면 이 패키지를 중앙 저장소로 전송할 수 있으며, 도커를 실행하는 모든 컴퓨터에 전송할 수 있다.
- 도커의 3가지 주요 개념

  - **이미지** : 애플리케이션과 해당 환경을 패키지화 한것
  - **레지스트리** : 도커 이미지를 저장하고 다른 사람이나 컴퓨터 간에 해당 이미지를 쉽게 공유할 수 있는 저장소
  - **컨테이너** : 도커 기반 컨테이너 이미지에서 생성된 일반적인 리눅스 컨테이너.
  - **컨테이너는 런타임 위에서 실행되는 격리된 실행환경이며, 이미지는 그 격리된 실행환경에서 실행할 어플리케이션과 그 환경에 대해 패키징한 데이터 이다.**

    <Br>
    <Br>

### 도커 이미지의 빌드, 배포, 실행

---

1. 개발자는 먼저 이미지를 만든다. 그리고 도커에게 이미지를 빌드하고 푸시하라고 명령한다.
2. 도커는 이미지를 빌드하고 이미지를 레지스트리에 푸시한다.
3. 개발자는 프로덕션 머신의 도커에게 이미지를 실행하라고 명령한다.
4. 해당 도커는 레지스트리에서 실행할 이미지를 가져온다.
5. 도커는 이미지를 기반으로 격리된 컨테이너를 만들고, 이미지의 일부로 지정된 바이너리 실행 파일을 실행한다.
   <Br>
   <Br>

### 이미지 레이어

---

- 기존 이미지에 추가적인 파일이 필요할 때 다시 다운받는 방법이 아닌 해당 파일을 추가하기 위한 개념
- 이미지는 여러개의 Layer로 구성되고 파일이 추가되면 새로운 layer가 생성된다.
  → version을 관리하는 원칙이 된다.
- 각 layer는 동일 호스트에 한번만 저장된다.
  <Br>
  <Br>

**이미지 레이어로 인한 컨테이너 내부에서 실행되는 애플리케이션의 제약**

---

컨테이너화된 애플리케이션이 특정 커널 버전이 필요하다면 모든 시스템에서 작동하지 않을 수 있다.

→ 머신이 다른 버전의 리눅스 커널로 실행되거나 동일한 커널 모듈을 사용할 수 없는 경우!

(가상머신은 자체 커널을 실행하기 때문에 이런 제약이 없다.)

→ 커널 뿐만 아니라 특정 하드웨어 아키텍처 용으로 만들어진 컨테이너화된 애플리케이션은 해당 아키텍처 시스템에서만 실행될 수 있다.
